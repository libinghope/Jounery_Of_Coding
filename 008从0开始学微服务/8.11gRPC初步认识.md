---
title: gRPC初步认识
date: 2020/4/30
comments: true
categories:
  - 微服务
tags:
  - 微服务
permalink: "8.11"
---
## gRPC简介

gRPC  是一个高性能、开源和通用的 RPC 框架，面向移动和 HTTP/2 设计。

gRPC 基于 HTTP/2 标准设计，带来诸如双向流、流控、头部压缩、单 TCP 连接上的多复用请求等特。这些特性使得其在移动设备上表现更好，更省电和节省空间占用。

在 gRPC 里客户端应用可以像调用本地对象一样直接调用另一台不同的机器上服务端应用的方法，使得您能够更容易地创建分布式应用和服务。与许多 RPC 系统类似，gRPC 也是基于以下理念：定义一个服务，指定其能够被远程调用的方法（包含参数和返回类型）。在服务端实现这个接口，并运行一个 gRPC 服务器来处理客户端调用。在客户端拥有一个存根能够像服务端一样的方法。

![gRPC原理](https://pic.downk.cc/item/5ebf4d32c2a9a83be584a652.jpg)

gRPC 客户端和服务端可以在多种环境中运行和交互 - 从 google 内部的服务器到你自己的笔记本，并且可以用任何 gRPC 支持的语言来编写。所以，你可以很容易地用 Java 创建一个 gRPC 服务端，用 Go、Python、Ruby 来创建客户端。此外，Google 最新 API 将有 gRPC 版本的接口，使你很容易地将 Google 的功能集成到你的应用里。

## 使用 protocol buffers

gRPC 默认使用 protocol buffers，这是 Google 开源的一套成熟的结构数据序列化机制（当然也可以使用其他数据格式如 JSON）。通常情况下我们用 proto files 创建 gRPC 服务，用 protocol buffers 消息类型来定义方法参数和返回类型。

关于protocol buffers的版本问题，虽然你可以使用 proto2 (当前默认的 protocol buffers 版本)， 我们通常建议你在 gRPC 里使用 proto3，因为这样你可以使用 gRPC 支持全部范围的的语言，并且能避免 proto2 客户端与 proto3 服务端交互时出现的兼容性问题，反之亦然。

## hello gRPC

以下采用go语言完成。

### 安装

>go get -u github.com/grpc/grpc-go/examples/helloworld/greeter_client
 go get -u github.com/grpc/grpc-go/examples/helloworld/greeter_server

 